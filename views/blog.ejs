<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('./partials/head') %>
        <title>Blog</title>
</head>
<body>
    <%- include('./partials/navbar') %>
    <% if (blog) { %>
        <div class="container mt-4">
            <h1 class="card-title mb-3">
                <%= blog.title %>
            </h1>
            <img src="/<%= blog.coverImage %>" width="700px"/>
            <pre class="card-text mt-3">
                <%= blog.description %>
            </pre>
        </div>

        <% const name = blog.author.fullName
            .split(' ')
            .map(word => word.charAt(0).toUpperCase() + word.slice(1))
            .join(' ')
        %>
        <div class="container mt-5">
            <img src="<%= blog.author.photo %>" width="60px">
            <span class="ms-3"><%= name %></span>
        </div>

        <div class="container mt-5">
            <h2>Comments</h2>
            <form action="/blog/comment/<%= blog._id %>" method="post">
                <div class="d-flex">
                    <input type="text" name="content" class="form-control" placeholder="Enter your comment" />
                <button class="btn btn-sm btn-primary">Add</button>
                </div>
                
            </form>
        </div>

        <div class="container mt-4" >
            <% comments.forEach(comment => { %>
             <img src="<%=  comment.createdBy.photo %>" width="40px"> 
                <span class="ms-3"><%= comment.createdBy.fullName %></span>
                <p class="ms-3"><%= comment.content %></p>
            <% }) %>
        </div>
     
    <% } %>
    <%- include('./partials/scripts') %>
</body>
</html>